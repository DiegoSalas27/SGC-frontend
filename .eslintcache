[{"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\index.js":"1","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\reportWebVitals.js":"2","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\App.js":"3","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\context\\SocketContext.js":"4","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\utils\\setJWT.js":"5","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\DashBoard.js":"6","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\login\\Login.js":"7","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\hooks\\useSocket.js":"8","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\axios.js":"9","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\AdminStart\\AdminStart.js":"10","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Trucks\\Trucks.js":"11","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\CollectionPoints\\CollectionPoints.js":"12","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Map\\Map.js":"13","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Users\\Users.js":"14","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\SideBar\\SideBar.js":"15","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\MessageModal.js":"16","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\common\\Input\\Input.js":"17","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\NavBar\\NavBar.js":"18","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Map\\MapConfig.js":"19","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Trucks\\Truck\\Truck.js":"20","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\CollectionPoints\\CollectionPoint\\CollectionPoint.js":"21","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\Modal.js":"22","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Users\\User\\User.js":"23","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Backdrop\\Backdrop.js":"24","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\utils\\constants.js":"25","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\CollectionPointForm\\CollectionPointForm.js":"26","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\EntryPointForm\\EntryPointForm.js":"27","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\UserForm\\UserForm.js":"28","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\TruckForm\\TruckForm.js":"29","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\common\\Select\\Select.js":"30"},{"size":645,"mtime":1622050415156,"results":"31","hashOfConfig":"32"},{"size":375,"mtime":1622050415172,"results":"33","hashOfConfig":"32"},{"size":1442,"mtime":1622050415095,"results":"34","hashOfConfig":"32"},{"size":457,"mtime":1622050415154,"results":"35","hashOfConfig":"32"},{"size":256,"mtime":1622050415174,"results":"36","hashOfConfig":"32"},{"size":5519,"mtime":1622056616131,"results":"37","hashOfConfig":"32"},{"size":3508,"mtime":1622050415172,"results":"38","hashOfConfig":"32"},{"size":861,"mtime":1622050415155,"results":"39","hashOfConfig":"32"},{"size":189,"mtime":1622050415123,"results":"40","hashOfConfig":"32"},{"size":423,"mtime":1622057289438,"results":"41","hashOfConfig":"32"},{"size":1511,"mtime":1622050415167,"results":"42","hashOfConfig":"32"},{"size":1756,"mtime":1622050415160,"results":"43","hashOfConfig":"32"},{"size":5168,"mtime":1622050415163,"results":"44","hashOfConfig":"32"},{"size":1665,"mtime":1622050415170,"results":"45","hashOfConfig":"32"},{"size":2542,"mtime":1622059421381,"results":"46","hashOfConfig":"32"},{"size":654,"mtime":1622050415126,"results":"47","hashOfConfig":"32"},{"size":380,"mtime":1622050415153,"results":"48","hashOfConfig":"32"},{"size":4460,"mtime":1622056485459,"results":"49","hashOfConfig":"32"},{"size":7566,"mtime":1622050415164,"results":"50","hashOfConfig":"32"},{"size":1749,"mtime":1622050415166,"results":"51","hashOfConfig":"32"},{"size":1487,"mtime":1622050415159,"results":"52","hashOfConfig":"32"},{"size":8118,"mtime":1622050415142,"results":"53","hashOfConfig":"32"},{"size":1803,"mtime":1622050415169,"results":"54","hashOfConfig":"32"},{"size":209,"mtime":1622050415124,"results":"55","hashOfConfig":"32"},{"size":246,"mtime":1622050415174,"results":"56","hashOfConfig":"32"},{"size":5579,"mtime":1622050415144,"results":"57","hashOfConfig":"32"},{"size":2159,"mtime":1622050415145,"results":"58","hashOfConfig":"32"},{"size":11116,"mtime":1622050415148,"results":"59","hashOfConfig":"32"},{"size":6334,"mtime":1622050415146,"results":"60","hashOfConfig":"32"},{"size":397,"mtime":1622050415154,"results":"61","hashOfConfig":"32"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},"1bwndwi",{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"64"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"64"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"64"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"64"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"64"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"64"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"64"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"115","usedDeprecatedRules":"64"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"124","usedDeprecatedRules":"64"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"129","usedDeprecatedRules":"64"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"64"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\index.js",[],["135","136"],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\reportWebVitals.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\App.js",["137"],"import {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { useState, useEffect } from 'react';\r\nimport setJWT from \"./utils/setJWT\";\r\nimport jwt_decode from 'jwt-decode';\r\nimport './App.css';\r\nimport DashBoard from \"./pages/Dashboard/DashBoard\";\r\nimport Login from './pages/login/Login';\r\n\r\nconst jwt = localStorage.jwtToken\r\n\r\nif (jwt) {\r\n  setJWT(jwt)\r\n  const decode_jwt = jwt_decode(jwt);\r\n  const currentTime = Date.now()/1000;\r\n\r\n  if(decode_jwt.exp < currentTime) {\r\n    setJWT(false);\r\n    localStorage.removeItem(\"jwtToken\");\r\n    window.location.replace(\"/\");\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  const [loggedIn, setLoggedIn] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (localStorage.jwtToken) {\r\n      const decoded = jwt_decode(localStorage.jwtToken);\r\n      setLoggedIn(decoded);\r\n    } else {\r\n      setLoggedIn(null);\r\n    }\r\n  }, [setLoggedIn]);\r\n\r\n  function renderRoutes() {\r\n    let routes = (\r\n      <Switch>\r\n        <Route exact path=\"/\" component={() => <Login setLoggedIn={setLoggedIn}/>} />\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    )\r\n    if (loggedIn) {\r\n      routes = (\r\n        <Switch>\r\n          <Route path=\"/main\" component={DashBoard} />\r\n          <Redirect to=\"/main\" />\r\n        </Switch>\r\n      );\r\n    }\r\n\r\n    return routes;\r\n  }\r\n\r\n  return (\r\n    <Router>\r\n        { renderRoutes() }\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\context\\SocketContext.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\utils\\setJWT.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\DashBoard.js",["138","139"],"import { useLocation, useHistory } from \"react-router\";\r\nimport { useEffect, useState, useContext } from \"react\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { SocketContext } from \"../../context/SocketContext\";\r\nimport SideBar from \"../../components/SideBar/SideBar\";\r\nimport NavBar from \"../../components/NavBar/NavBar\";\r\nimport AdminStart from \"./AdminStart/AdminStart\";\r\nimport CollectionPoints from \"./CollectionPoints/CollectionPoints\";\r\nimport Trucks from \"./Trucks/Trucks\";\r\nimport Users from \"./Users/Users\";\r\nimport Map from \"./Map/Map\";\r\nimport \"./DashBoard.css\";\r\nimport setJWT from \"../../utils/setJWT\";\r\n\r\nconst options = {\r\n  enableHighAccuracy: false,\r\n  timeout: 1000,\r\n  maximumAge: 0,\r\n};\r\n\r\nconst Dashboard = () => {\r\n  const [entityArrayDelete, setEntityArrayDelete] = useState([]);\r\n  const [operationResponse, setOperationResponse] = useState(null);\r\n  const [editEntity, setEditEntity] = useState(null);\r\n  const [route, setRoute] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [initialLode, setInitialLoad] = useState(null);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  const { socket } = useContext(SocketContext);\r\n\r\n  useEffect(() => {}, [location]);\r\n\r\n  useEffect(() => {\r\n    setUser(jwt_decode(localStorage.getItem(\"jwtToken\")));\r\n    setInitialLoad(true);\r\n  }, []);\r\n\r\n  // Crear un marcador al estar conectado como conductor\r\n  useEffect(() => {\r\n    if (user && user.rol_id === 2) {\r\n      if (navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          const driverMarker = {\r\n            nombre: user.nombre_usuario,\r\n            latitud: position.coords.latitude,\r\n            longitud: position.coords.longitude,\r\n            id: user.id,\r\n          };\r\n          socket.emit(\"marcador-nuevo\", driverMarker);\r\n        });\r\n        setInterval(() => {\r\n          navigator.geolocation.getCurrentPosition((position) => {\r\n            const driverMarker = {\r\n              nombre: user.nombre_usuario,\r\n              latitud: position.coords.latitude,\r\n              longitud: position.coords.longitude,\r\n              id: user.id,\r\n            };\r\n            console.log(position.coords.latitude, position.coords.longitude);\r\n            socket.emit(\"marcador-actualizado\", driverMarker);\r\n          });\r\n        }, 1000);\r\n        // navigator.geolocation.watchPosition(success, error, options);\r\n      }\r\n    } else {\r\n      if (initialLode) {\r\n        const { id, rol_id } = jwt_decode(localStorage.getItem(\"jwtToken\"));\r\n        if (rol_id === 2) {\r\n          socket.emit(\"marcador-eliminar\", id);\r\n          localStorage.removeItem(\"jwtToken\");\r\n          setTimeout(() => {\r\n            window.location.replace(\"/\");\r\n          }, 500);\r\n        }\r\n      } else if (!initialLode && user) {\r\n        localStorage.removeItem(\"jwtToken\");\r\n        window.location.replace(\"/\");\r\n      }\r\n    }\r\n    return () => {\r\n      socket.off(\"marcador-nuevo\");\r\n      socket.off(\"marcador-eliminar\");\r\n    };\r\n  }, [socket, user, initialLode]);\r\n\r\n  function logout() {\r\n    setJWT(false);\r\n    if (user.rol_id === 1) {\r\n      setInitialLoad(false);\r\n    } else {\r\n      setUser(null);\r\n    }\r\n  }\r\n\r\n  // function success(position) {\r\n  //   console.log(position.coords.latitude, position.coords.longitude);\r\n  //   const driverMarker = {\r\n  //     nombre: user.nombre_usuario,\r\n  //     latitud: position.coords.latitude,\r\n  //     longitud: position.coords.longitude,\r\n  //     id: user.id\r\n  //   }\r\n  //   socket.emit('marcador-actualizado', driverMarker);\r\n  // };\r\n\r\n  // function error(err) {\r\n  //   console.warn('ERROR(' + err.code + '): ' + err.message);\r\n  // };\r\n\r\n  function renderPanel() {\r\n    // eslint-disable-next-line default-case\r\n    switch (location.pathname) {\r\n      case \"/main\":\r\n        return <AdminStart />;\r\n      case \"/main/user\":\r\n        return (\r\n          <Users\r\n            entityArrayDelete={entityArrayDelete}\r\n            setEntityArrayDelete={setEntityArrayDelete}\r\n            operationResponse={operationResponse}\r\n            setEditEntity={setEditEntity}\r\n          />\r\n        );\r\n      case \"/main/collectionPoint\":\r\n        return (\r\n          <CollectionPoints\r\n            entityArrayDelete={entityArrayDelete}\r\n            setEntityArrayDelete={setEntityArrayDelete}\r\n            operationResponse={operationResponse}\r\n            setEditEntity={setEditEntity}\r\n          />\r\n        );\r\n      case \"/main/truck\":\r\n        return (\r\n          <Trucks\r\n            entityArrayDelete={entityArrayDelete}\r\n            setEntityArrayDelete={setEntityArrayDelete}\r\n            operationResponse={operationResponse}\r\n            setEditEntity={setEditEntity}\r\n          />\r\n        );\r\n      case \"/main/map\":\r\n        return <Map showRoute={route} user={user} />;\r\n      case \"/main/dashboard\":\r\n        return <AdminStart />;\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <SideBar userRol={user && user.rol_id} userLogout={logout} />\r\n      <NavBar\r\n        userName={user ? user.nombre_usuario : \"\"}\r\n        userRole={user && user.rol_id}\r\n        entityArrayDelete={entityArrayDelete}\r\n        setEntityArrayDelete={setEntityArrayDelete}\r\n        setOperationResponse={setOperationResponse}\r\n        editEntity={editEntity}\r\n        setEditEntity={setEditEntity}\r\n        setRoute={setRoute}\r\n      />\r\n      <div className=\"main-panel\">{renderPanel()}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\login\\Login.js",["140"],"import { useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Formik, Form } from \"formik\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport axios from \"../../axios\";\r\nimport * as Yup from \"yup\";\r\nimport logo from \"../../assets/img/logo512.png\";\r\nimport CustomTextInput from \"../../components/common/Input/Input\";\r\nimport setJWT from \"../../utils/setJWT\";\r\nimport MessageModal from \"../../components/Modal/MessageModal\";\r\nconst Login = ({ setLoggedIn }) => {\r\n  const [error, setError] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [modalContent, setModalContent] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  async function submitHandler(\r\n    { username, password },\r\n    setSubmitting,\r\n    resetForm\r\n  ) {\r\n    const user = {\r\n      username,\r\n      password,\r\n      confirmPassword: password,\r\n    };\r\n    try {\r\n      const loggedIn = await axios.post(\"/users/login\", user);\r\n\r\n      const { token } = loggedIn.data;\r\n\r\n      localStorage.setItem(\"jwtToken\", token);\r\n\r\n      setJWT(token); // set token in header\r\n\r\n      console.log(loggedIn);\r\n      resetForm();\r\n      setSubmitting(false);\r\n      setShowModal(false);\r\n      setError(null);\r\n      setLoggedIn(token);\r\n      history.push(\"/main\");\r\n    } catch (err) {\r\n      setSubmitting(false);\r\n      if (\r\n        err.response &&\r\n        err.response.data.type &&\r\n        err.response.data.type === \"popup\"\r\n      ) {\r\n        setModalContent(err.response.data.error);\r\n        setShowModal(true);\r\n        setError(null);\r\n      } else {\r\n        setShowModal(false);\r\n        setError(err.response.data.error);\r\n        console.log(err.response.data);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <MessageModal\r\n        title=\"Error\"\r\n        show={showModal}\r\n        modalClose={() => {\r\n          setShowModal(false);\r\n        }}\r\n        content={modalContent}\r\n      />\r\n      <div className=\"section-container center h-500\">\r\n        <Formik\r\n          initialValues={{\r\n            username: \"\",\r\n            password: \"\",\r\n          }}\r\n          validationSchema={Yup.object({\r\n            username: Yup.string().required(\"Este campo es obligatorio\"),\r\n            password: Yup.string()\r\n              .min(6, \"El contraseña debe contener al menos 6 caracteres\")\r\n              .required(\"Este campo es obligatorio\"),\r\n          })}\r\n          onSubmit={(values, { setSubmitting, resetForm }) => {\r\n            submitHandler(values, setSubmitting, resetForm);\r\n          }}\r\n        >\r\n          {(props) => (\r\n            <Form className=\"authForm\">\r\n              <CustomTextInput\r\n                name=\"username\"\r\n                type=\"text\"\r\n                placeholder=\"Ingrese usuario\"\r\n              />\r\n              <CustomTextInput\r\n                name=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"Ingrese contraseña\"\r\n              />\r\n              {error && <div className=\"error mt-3\">{error}</div>}\r\n              <div className=\"bottom-panel\">\r\n                {/* <p className=\"link-text\">Olvidé mi contraseña</p> */}\r\n                <button type=\"submit\">\r\n                  {props.isSubmitting ? \"Cargando...\" : \"Ingresar\"}\r\n                </button>\r\n              </div>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n      <div className=\"logoBar\">\r\n        <img src={logo} alt=\"\" width=\"150\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\hooks\\useSocket.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\axios.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\AdminStart\\AdminStart.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Trucks\\Trucks.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\CollectionPoints\\CollectionPoints.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Map\\Map.js",["141","142","143","144","145","146"],"import { useContext, useEffect } from \"react\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { CustomMap } from \"./MapConfig\";\r\nimport axios from \"../../../axios\";\r\nimport \"./Map.css\";\r\nimport { SocketContext } from \"../../../context/SocketContext\";\r\nimport { useState } from \"react\";\r\nimport MessageModal from \"../../../components/Modal/MessageModal\";\r\n\r\nconst puntoInicial = {\r\n  lng: 5,\r\n  lat: 34,\r\n  zoom: 2,\r\n};\r\n\r\nconst Map = ({ showRoute, user }) => {\r\n  const [map, setMap] = useState(null);\r\n  const { socket } = useContext(SocketContext);\r\n  const [showAlertModal, setShowAlertModal] = useState(null);\r\n  const decoded = jwt_decode(localStorage.getItem(\"jwtToken\"));\r\n\r\n  useEffect(() => {\r\n    setMap(new CustomMap(\"map\"));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    map && initMarkers();\r\n  }, [map, showRoute]);\r\n\r\n  // Escuchar como fiscalizador conductores activos\r\n  useEffect(() => {\r\n    if (map && showRoute) {\r\n      socket.emit(\"marcadores-activos\", {});\r\n      socket.on(\"marcadores-activos\", (marcadores) => {\r\n        for (const key of Object.keys(marcadores)) {\r\n          if (decoded.rol_id === 1) {\r\n            map.addMarker(marcadores[key], \"truck\", key);\r\n          } else if (\r\n            decoded.rol_id === 2 &&\r\n            decoded.id === marcadores[key].id\r\n          ) {\r\n            map.addMarker(marcadores[key], \"truck\", key);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return () => {\r\n      socket.off(\"marcadores-activos\");\r\n    };\r\n  }, [socket, showRoute]);\r\n\r\n  // Escuchar como fiscalizador nuevos de conductores que se conectan\r\n  useEffect(() => {\r\n    if (showRoute) {\r\n      socket.on(\"marcador-nuevo\", (marcador) => {\r\n        if (map) {\r\n          if (decoded.rol_id === 1) {\r\n            map.addMarker(marcador, \"truck\", marcador.id);\r\n          } else if (decoded.rol_id === 2 && decoded.id === marcador.id) {\r\n            map.addMarker(marcador, \"truck\", marcador.id);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return () => {\r\n      socket.off(\"marcador-nuevo\");\r\n    };\r\n  }, [socket, showRoute, map]);\r\n\r\n  // Mover marcador mediante sockets\r\n  useEffect(() => {\r\n    if (showRoute) {\r\n      socket.on(\"marcador-actualizado\", (marcador) => {\r\n        if (map) {\r\n          if (decoded.rol_id === 1) {\r\n            map.updateMarker(marcador, marcador.id);\r\n          } else if (decoded.rol_id === 2 && decoded.id === marcador.id) {\r\n            map.updateMarker(marcador, marcador.id);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return () => {\r\n      socket.off(\"marcador-actualizado\");\r\n    };\r\n  }, [socket, showRoute, map]);\r\n\r\n  // Escuchar como fiscalizador conductores que se desconectan\r\n  useEffect(() => {\r\n    if (map && showRoute) {\r\n      socket.on(\"marcador-eliminar\", (id) => {\r\n        if (decoded.rol_id === 1) {\r\n          map.deleteMarker(id);\r\n        } else if (decoded.rol_id === 2 && decoded.id === id) {\r\n          map.deleteMarker(id);\r\n        }\r\n      });\r\n    }\r\n    return () => {\r\n      socket.off(\"marcador-eliminar\");\r\n    };\r\n  }, [socket, showRoute]);\r\n\r\n  async function initMarkers() {\r\n    let responseTrash;\r\n    try {\r\n      responseTrash = await axios.get(\"collectionPoints/all\");\r\n      responseTrash.data.forEach((entity) => {\r\n        map.addMarker(entity, \"trash\", entity.id);\r\n      });\r\n      // map.addSelfMarker();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n\r\n    if (showRoute) {\r\n      const responseTrucks = await axios.get(\"/trucks/getAllDrivers\");\r\n\r\n      const json_locations = responseTrash.data.map((trash) => {\r\n        return {\r\n          id: trash.id,\r\n          demand: trash.capacidad_actual,\r\n          lat: trash.latitud,\r\n          lng: trash.longitud,\r\n        };\r\n      });\r\n\r\n      const json_drivers = responseTrucks.data.map((driver) => {\r\n        return {\r\n          id: driver.id,\r\n          license_plate: driver.placa,\r\n          driver: driver.driver,\r\n          capacity: driver.capacidad - driver.capacidad_actual,\r\n          lat: driver.lat,\r\n          lng: driver.lng,\r\n        };\r\n      });\r\n\r\n      console.log(\"YO ENVIO\", json_drivers);\r\n      console.log(\"TACHOS\", json_locations);\r\n\r\n      try {\r\n        const response = await axios.post(\"/collectionPoints/optimize\", {\r\n          json_locations: JSON.stringify(json_locations),\r\n          json_drivers: JSON.stringify(json_drivers),\r\n        });\r\n\r\n        console.log(response);\r\n\r\n        if (user && user.rol_id === 2) {\r\n          // if you are the driver, you can only see yourself\r\n          response.data.response.trucks = response.data.response.trucks.filter(\r\n            (truck) => truck.id === user.id\r\n          );\r\n        }\r\n\r\n        map.showTruckRoutes(response.data.response.trucks);\r\n      } catch (err) {\r\n        setShowAlertModal(true);\r\n        setTimeout(() => {\r\n          setShowAlertModal(false);\r\n        }, 3000);\r\n        throw new Error(\"Ha ocurrido un error: \", err);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div id=\"map\" className=\"map\"></div>\r\n      <MessageModal\r\n        show={showAlertModal}\r\n        title=\"Error\"\r\n        content=\"Error de conexión\"\r\n      />{\" \"}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Users\\Users.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\SideBar\\SideBar.js",["147","148","149","150","151","152","153"],"import { Link } from \"react-router-dom\";\r\nimport user from \"../../assets/img/user.png\";\r\nimport collectionPoint from \"../../assets/img/puntoAcopio.png\";\r\nimport truck from \"../../assets/img/truck.png\";\r\nimport map from \"../../assets/img/map.png\";\r\nimport dashboard from \"../../assets/img/dashboard.png\";\r\nimport logout from \"../../assets/img/logout.ico\";\r\nimport logo from \"../../assets/img/logo512.png\";\r\nimport \"./SideBar.scss\";\r\nimport setJWT from \"../../utils/setJWT\";\r\nimport { useState } from \"react\";\r\n\r\nconst SideBar = ({ userLogout, userRol }) => {\r\n  const [open, setOpen] = useState(true);\r\n\r\n  const openMenu = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const closeMenu = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={`sidebard-container ${open ? 'display-block':'display-none'}`}>\r\n        <ul>\r\n          <Link className=\"nav-link\" to=\"/main\">\r\n            <img\r\n              src={logo}\r\n              alt=\"\"\r\n              width=\"120\"\r\n              style={{ marginTop: \"-24px\", marginBottom: \"20px\" }}\r\n            />\r\n          </Link>\r\n          {userRol && userRol === 1 && (\r\n            <>\r\n              <Link className=\"nav-link\" to=\"/main/user\">\r\n                <li>\r\n                  <img src={user} width=\"40\" /> Usuario\r\n                </li>\r\n              </Link>\r\n\r\n              <Link className=\"nav-link\" to=\"/main/collectionPoint\">\r\n                <li>\r\n                  <img src={collectionPoint} width=\"40\" /> Punto de acopio\r\n                </li>\r\n              </Link>\r\n\r\n              <Link className=\"nav-link\" to=\"/main/truck\">\r\n                <li>\r\n                  <img src={truck} width=\"40\" /> Camión recolector\r\n                </li>\r\n              </Link>\r\n              {/* <Link className=\"nav-link\" to=\"/main/dashboard\">\r\n              <li>\r\n                <img src={dashboard} width=\"40\" /> Dashboard\r\n              </li>\r\n            </Link> */}\r\n            </>\r\n          )}\r\n          <Link className=\"nav-link\" to=\"/main/map\">\r\n            <li>\r\n              <img src={map} width=\"40\" /> Ver mapa\r\n            </li>\r\n          </Link>\r\n          <li onClick={userLogout}>\r\n            <img src={logout} width=\"40\" /> Cerrar sesión\r\n          </li>\r\n          <div class=\"close small-x\" onClick={()=>closeMenu()}></div>\r\n        </ul>\r\n      </div>\r\n\r\n      <div className=\"hamburger\" onClick={() => openMenu()}>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SideBar;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\MessageModal.js",["154","155"],"import { useEffect, useState } from \"react\";\r\nimport \"./Modal.css\";\r\nimport Backdrop from \"../Backdrop/Backdrop\";\r\n\r\nconst MessageModal = ({ show, modalClose, title, content }) => {\r\n  return (\r\n    <>\r\n      <Backdrop show={show} clicked={modalClose} />\r\n      <div\r\n        className=\"modal\"\r\n        style={{\r\n          transform: show ? \"translateY(-70px)\" : \"translateY(-100vh)\",\r\n          opacity: show ? \"1\" : \"0\",\r\n        }}\r\n      >\r\n        <div className=\"modalHeader\">\r\n          <h3>{title}</h3>\r\n        </div>\r\n        <div className=\"modal-content-text\">{content}</div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MessageModal;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\common\\Input\\Input.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\NavBar\\NavBar.js",["156","157"],"import { useLocation } from \"react-router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport user from \"../../assets/img/user.png\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport \"./NavBar.scss\";\r\nimport MessageModal from \"../Modal/MessageModal\";\r\n\r\nconst NavBar = ({\r\n  userName,\r\n  userRole,\r\n  entityArrayDelete,\r\n  setEntityArrayDelete,\r\n  setOperationResponse,\r\n  editEntity,\r\n  setEditEntity,\r\n  setRoute,\r\n}) => {\r\n  const [sectionTitle, setSectionTitle] = useState(\r\n    userRole === 2 ? \"Inicio Conductor\" : \"Inicio Administrador\"\r\n  );\r\n  const [showCrudButtons, setShowCrudButtons] = useState(false);\r\n  const [showWatchRoute, setWatchRoute] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [showAlertModal, setShowAlertModal] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState(null);\r\n  const [operation, setOperation] = useState(\"create\");\r\n  const [option, setOption] = useState(\"\");\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    setNavBarTitle();\r\n  }, [location]);\r\n\r\n  function setNavBarTitle() {\r\n    setEntityArrayDelete([]);\r\n    setRoute(false);\r\n    setWatchRoute(false);\r\n    switch (location.pathname) {\r\n      case \"/main\": {\r\n        setSectionTitle(\r\n          userRole === 2 ? \"Inicio Conductor\" : \"Inicio Administrador\"\r\n        );\r\n        setShowCrudButtons(false);\r\n        break;\r\n      }\r\n      case \"/main/user\": {\r\n        setSectionTitle(\"Lista de usuario\");\r\n        setShowCrudButtons(true);\r\n        setOption(\"/users\");\r\n        break;\r\n      }\r\n      case \"/main/collectionPoint\": {\r\n        setSectionTitle(\"Lista puntos de acopio\");\r\n        setShowCrudButtons(true);\r\n        setOption(\"/collectionPoints\");\r\n        break;\r\n      }\r\n      case \"/main/truck\": {\r\n        setSectionTitle(\"Lista de camiones\");\r\n        setShowCrudButtons(true);\r\n        setOption(\"/trucks\");\r\n        break;\r\n      }\r\n      case \"/main/map\": {\r\n        setSectionTitle(\"Recorrido en tiempo real\");\r\n        setShowCrudButtons(false);\r\n        setWatchRoute(true);\r\n        break;\r\n      }\r\n      case \"/main/dashboard\": {\r\n        setSectionTitle(\"Dashboard principal\");\r\n        setShowCrudButtons(false);\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n  }\r\n\r\n  function setModal(operation) {\r\n    setOperation(operation);\r\n    setShowModal(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"navbar-container\">\r\n      <ul>\r\n        <li>\r\n          <p>{sectionTitle}</p>\r\n          <span className=\"subtitle name\">Bienvenido {userName}</span>\r\n        </li>\r\n        {showCrudButtons && (\r\n          <div className=\"navButtons\">\r\n            <button\r\n              onClick={() => {\r\n                setEditEntity(null);\r\n                setModal(\"create\");\r\n              }}\r\n            >\r\n              Agregar\r\n            </button>\r\n            <button onClick={() => setModal(\"delete\")}>Eliminar</button>\r\n            {location.pathname === \"/main/collectionPoint\" && (\r\n              <button\r\n                onClick={() => {\r\n                  setEditEntity(null);\r\n                  setModal(\"entryPoint\");\r\n                }}\r\n              >\r\n                Punto de partida\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n        {showWatchRoute && (\r\n          <div className=\"navButtons recorrido\">\r\n            <button onClick={() => setRoute(true)}>Ver recorrido</button>\r\n          </div>\r\n        )}\r\n        <li>\r\n          <img src={user} /> &nbsp;&nbsp;&nbsp;\r\n          <span className=\"subtitle\">{userName}</span>\r\n        </li>\r\n      </ul>\r\n      <MessageModal\r\n        title=\"Registro exitoso\"\r\n        show={showAlertModal}\r\n        content={alertMessage}\r\n      />\r\n      <Modal\r\n        show={showModal}\r\n        operation={operation}\r\n        setOperation={setOperation}\r\n        option={option}\r\n        entityArrayDelete={entityArrayDelete}\r\n        setEntityArrayDelete={setEntityArrayDelete}\r\n        setOperationResponse={setOperationResponse}\r\n        editEntity={editEntity}\r\n        modalClose={(alertMessage) => {\r\n          setEditEntity(null);\r\n          setShowModal(false);\r\n          if (typeof alertMessage === \"string\") {\r\n            setAlertMessage(alertMessage);\r\n            setShowAlertModal(true);\r\n            setTimeout(() => {\r\n              setShowAlertModal(false);\r\n            }, 3000);\r\n          }\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Map\\MapConfig.js",["158"],"import collectionPoint from \"../../../assets/img/trash-s-icon.svg\";\r\nimport user from \"../../../assets/img/user-s-icon.svg\";\r\nimport truck from \"../../../assets/img/truck-s-icon.svg\";\r\nimport axios from \"axios\";\r\n\r\nexport class CustomMap {\r\n  constructor(divId) {\r\n    this.googleMap = new window.google.maps.Map(\r\n      document.getElementById(divId),\r\n      {\r\n        zoom: 12,\r\n        center: {\r\n          lat: -12.122587,\r\n          lng: -76.992705,\r\n        },\r\n      }\r\n    );\r\n    this.markers = {};\r\n  }\r\n\r\n  addSelfMarker() {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition((position) => {\r\n        const marker = new window.google.maps.Marker({\r\n          map: this.googleMap,\r\n          position: {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude,\r\n          },\r\n          icon: user,\r\n        });\r\n\r\n        marker.addListener(\"click\", () => {\r\n          const inforWindow = new window.google.maps.InfoWindow({\r\n            content: \"Este eres tú\",\r\n          });\r\n\r\n          inforWindow.open(this.googleMap, marker);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  updateMarker(mappable, id) {\r\n    console.log(mappable.latitud, mappable.longitud);\r\n    const position = new window.google.maps.LatLng(\r\n      mappable.latitud,\r\n      mappable.longitud\r\n    );\r\n    this.markers[id.toString() + \"truck\"] &&\r\n      this.markers[id.toString() + \"truck\"].setPosition(position);\r\n  }\r\n\r\n  deleteMarker(id) {\r\n    this.markers[id.toString() + \"truck\"].setMap(null);\r\n    delete this.markers[id.toString() + truck];\r\n  }\r\n\r\n  addMarker(mappable, entityName, id) {\r\n    // can pass any argument that satisfies de Mappable interface defined\r\n    const marker = new window.google.maps.Marker({\r\n      map: this.googleMap,\r\n      position: {\r\n        lat: mappable.latitud,\r\n        lng: mappable.longitud,\r\n      },\r\n      icon: entityName === \"trash\" ? collectionPoint : truck,\r\n    });\r\n\r\n    marker.id = id;\r\n\r\n    this.markers[marker.id.toString() + entityName] = marker;\r\n\r\n    marker.addListener(\"click\", () => {\r\n      const inforWindow = new window.google.maps.InfoWindow({\r\n        content: mappable.nombre,\r\n      });\r\n\r\n      inforWindow.open(this.googleMap, marker);\r\n    });\r\n  }\r\n\r\n  async showTruckRoutes2(trucks) {\r\n    debugger;\r\n    var directionsService = new window.google.maps.DirectionsService();\r\n    var directionsDisplay = new window.google.maps.DirectionsRenderer();\r\n\r\n    // this.googleMap.data.map\r\n\r\n    // new window.google.maps\r\n\r\n    directionsDisplay.setMap(this.googleMap);\r\n\r\n    var data = trucks;\r\n\r\n    console.log(data);\r\n\r\n    this.calculateAndDisplayRoute(directionsService, directionsDisplay, data);\r\n  }\r\n\r\n  calculateAndDisplayRoute(directionsService, directionsDisplay, data) {\r\n    for (var j = 0; j < data.length; ++j) {\r\n      console.log(data[j]);\r\n\r\n      var len = Object.keys(data[j].names_route).length;\r\n\r\n      for (var i = 0; i < len - 1; ++i) {\r\n        directionsService.route(\r\n          {\r\n            origin: data[j].names_route[i],\r\n            destination: data[j].names_route[i + 1],\r\n            travelMode: \"DRIVING\",\r\n          },\r\n          function (response, status) {\r\n            if (status === \"OK\") {\r\n              directionsDisplay.setDirections(response);\r\n            } else {\r\n              window.alert(\"Directions request failed due to \" + status);\r\n            }\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  async showTruckRoutes(trucks) {\r\n    console.log(trucks);\r\n    // send tracks currently in the database with their ids, license_plate, driver, capacity and current garbashe volume\r\n    // send trash currently in the database with their ids, capacity and current garbashe volume, coordinates\r\n\r\n    // backend returns trucks with the following data:\r\n    // id, distance, license_plate, driver, route(matrix)\r\n\r\n    // const trucks = [\r\n    //   {\r\n    //     id: 1,\r\n    //     distance: \"100\",\r\n    //     license_plate: \"KJKAD1\",\r\n    //     driver: \"Pedro Salinas\",\r\n    //     route: [\r\n    //       [-77.013743, -12.177352][(-77.00831, -12.170845)], // lng, lat\r\n    //       [-77.007002, -12.172308],\r\n    //       [-77.005851, -12.171445],\r\n    //       [-77.005054, -12.172625],\r\n    //     ],\r\n    //   },\r\n    //   {\r\n    //     id: 2,\r\n    //     distance: \"200\",\r\n    //     license_plate: \"1A0AS0\",\r\n    //     driver: \"Juan Dominguez\",\r\n    //     route: [\r\n    //       [-77.013892, -12.176537],\r\n    //       [-77.014595, -12.175761],\r\n    //       [-77.01496, -12.176097],\r\n    //       [-77.013384, -12.177706],\r\n    //     ],\r\n    //   },\r\n    // ];\r\n\r\n    var colors = [];\r\n\r\n    trucks.forEach((_) => {\r\n      colors.push(\"#\" + Math.floor(Math.random() * 16777215).toString(16));\r\n    });\r\n\r\n    var infowindow = new window.google.maps.InfoWindow();\r\n\r\n    // process the loaded GeoJSON data.\r\n    var bounds = new window.google.maps.LatLngBounds();\r\n\r\n    let map = this.googleMap.data.map;\r\n\r\n    if (map) {\r\n      window.google.maps.event.addListener(\r\n        map.data,\r\n        \"addfeature\",\r\n        function (e) {\r\n          if (e.feature.getGeometry().getType() === \"MultiLineString\") {\r\n            var polys = e.feature.getGeometry().getArray();\r\n            for (var i = 0; i < polys.length; i++) {\r\n              for (var j = 0; j < polys[i].getLength(); j++) {\r\n                var poly = new window.google.maps.Polyline({\r\n                  map: this.map,\r\n                  path: polys[i].getArray(),\r\n                  strokeColor: colors[i % colors.length],\r\n                });\r\n                window.google.maps.event.addListener(\r\n                  poly,\r\n                  \"click\",\r\n                  (function (poly, i, feature) {\r\n                    return function () {\r\n                      infowindow.setContent(\r\n                        feature.getProperty(\"Distance\" + i) +\r\n                          \"<br>\" +\r\n                          feature.getProperty(\"Camion\" + i) +\r\n                          \"<br>\" +\r\n                          feature.getProperty(\"Conductor\" + i)\r\n                      );\r\n                      infowindow && infowindow.setPosition(polys[i].getAt(0));\r\n                      infowindow.open(this.map);\r\n                    };\r\n                  })(poly, i, e.feature)\r\n                );\r\n                bounds.extend(polys[i].getAt(j));\r\n              }\r\n            }\r\n            this.map.fitBounds(bounds);\r\n            this.map.data.setMap(null);\r\n          }\r\n        }\r\n      );\r\n\r\n      const properties = {};\r\n      const coordinates = [];\r\n\r\n      for (const [index, truck] of trucks.entries()) {\r\n        properties[`Distance${index}`] = \"Distancia: \" + truck.distance + \"km\";\r\n        properties[`Camion${index}`] = \"Placa: \" + truck.license_plate;\r\n        properties[`Conductor${index}`] = \"Conductor: \" + truck.driver;\r\n        for (const route of truck.route.entries()) {\r\n          route[0] = parseFloat(route[0]);\r\n          route[1] = parseFloat(route[1]);\r\n        }\r\n        coordinates.push(truck.route);\r\n      }\r\n\r\n      var jsonData = {\r\n        type: \"FeatureCollection\",\r\n        features: [\r\n          {\r\n            type: \"Feature\",\r\n            properties: properties,\r\n            geometry: {\r\n              type: \"MultiLineString\",\r\n              coordinates, // each matrix represents a truck route\r\n            },\r\n          },\r\n        ],\r\n      };\r\n\r\n      this.googleMap.data.addGeoJson(jsonData);\r\n      window.google.maps.event.addDomListener(window, \"load\");\r\n    }\r\n  }\r\n}\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Trucks\\Truck\\Truck.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\CollectionPoints\\CollectionPoint\\CollectionPoint.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\Modal.js",["159"],"import { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport axios from \"../../axios\";\r\nimport \"./Modal.css\";\r\nimport Backdrop from \"../Backdrop/Backdrop\";\r\nimport CollectionForm from \"./forms/CollectionPointForm/CollectionPointForm\";\r\nimport TruckForm from \"./forms/TruckForm/TruckForm\";\r\nimport UserForm from \"./forms/UserForm/UserForm\";\r\nimport EntryPointForm from \"./forms/EntryPointForm/EntryPointForm\";\r\n\r\nconst Modal = ({\r\n  show,\r\n  modalClose,\r\n  option,\r\n  operation,\r\n  setOperation,\r\n  entityArrayDelete,\r\n  setEntityArrayDelete,\r\n  setOperationResponse,\r\n  editEntity,\r\n}) => {\r\n  const [mTitle, setModalTitle] = useState();\r\n  const [error, setError] = useState(null);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    modalTitle();\r\n  }, [location, option, operation, editEntity]);\r\n\r\n  function modalTitle() {\r\n    // eslint-disable-next-line default-case\r\n    switch (location.pathname) {\r\n      case \"/main/user\": {\r\n        if (editEntity !== null) {\r\n          operation !== \"edit\" && setOperation(\"edit\");\r\n          setModalTitle(\"Editar usuario\");\r\n          break;\r\n        } else {\r\n          if (operation === \"create\") {\r\n            setModalTitle(\"Registrar usuario\");\r\n            break;\r\n          } else if (operation === \"delete\") {\r\n            setModalTitle(\"Eliminar usuario\");\r\n            break;\r\n          } else {\r\n            setModalTitle(\"Editar usuario\");\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      case \"/main/collectionPoint\": {\r\n        if (editEntity !== null) {\r\n          operation !== \"edit\" && setOperation(\"edit\");\r\n          setModalTitle(\"Editar punto de acopio\");\r\n          break;\r\n        } else {\r\n          if (operation === \"create\") {\r\n            setModalTitle(\"Registrar punto de acopio\");\r\n            break;\r\n          } else if (operation === \"delete\") {\r\n            setModalTitle(\"Eliminar punto de acopio\");\r\n            break;\r\n          } else if (operation === \"entryPoint\") {\r\n            setModalTitle(\"Ingresar punto de partida\");\r\n            break;\r\n          } else {\r\n            setModalTitle(\"Editar punto de acopio\");\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      case \"/main/truck\": {\r\n        if (editEntity !== null) {\r\n          operation !== \"edit\" && setOperation(\"edit\");\r\n          setModalTitle(\"Editar camión recolector\");\r\n          break;\r\n        } else {\r\n          if (operation === \"create\") {\r\n            setModalTitle(\"Registrar camión recolector\");\r\n            break;\r\n          } else if (operation === \"delete\") {\r\n            setModalTitle(\"Eliminar camión recolector\");\r\n            break;\r\n          } else {\r\n            setModalTitle(\"Editar camión recolector\");\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function renderForm() {\r\n    // eslint-disable-next-line default-case\r\n    switch (location.pathname) {\r\n      case \"/main/user\": {\r\n        if (editEntity !== null) {\r\n          return (\r\n            <UserForm\r\n              option={option}\r\n              modalClose={modalClose}\r\n              setOperationResponse={setOperationResponse}\r\n              editEntity={editEntity}\r\n            />\r\n          );\r\n        } else {\r\n          if (operation === \"create\") {\r\n            return (\r\n              <UserForm\r\n                option={option}\r\n                modalClose={modalClose}\r\n                setOperationResponse={setOperationResponse}\r\n                show={show}\r\n              />\r\n            );\r\n          } else if (operation === \"delete\") {\r\n            return deleteForm(\"Usuarios\");\r\n          } else {\r\n            return (\r\n              <UserForm\r\n                option={option}\r\n                modalClose={modalClose}\r\n                setOperationResponse={setOperationResponse}\r\n                editEntity={editEntity}\r\n              />\r\n            );\r\n          }\r\n        }\r\n      }\r\n      case \"/main/collectionPoint\": {\r\n        if (editEntity !== null) {\r\n          return (\r\n            <CollectionForm\r\n              option={option}\r\n              modalClose={modalClose}\r\n              setOperationResponse={setOperationResponse}\r\n              editEntity={editEntity}\r\n            />\r\n          );\r\n        } else {\r\n          if (operation === \"create\") {\r\n            return (\r\n              <CollectionForm\r\n                option={option}\r\n                modalClose={modalClose}\r\n                setOperationResponse={setOperationResponse}\r\n                show={show}\r\n              />\r\n            );\r\n          } else if (operation === \"delete\") {\r\n            return deleteForm(\"Puntos de acopio\");\r\n          } else if (operation === \"entryPoint\") {\r\n            return (\r\n              <EntryPointForm\r\n                modalClose={modalClose}\r\n                show={show}\r\n                setOperation={setOperation}\r\n              />\r\n            );\r\n          } else {\r\n            return (\r\n              <CollectionForm\r\n                option={option}\r\n                modalClose={modalClose}\r\n                setOperationResponse={setOperationResponse}\r\n                editEntity={editEntity}\r\n              />\r\n            );\r\n          }\r\n        }\r\n      }\r\n      case \"/main/truck\": {\r\n        if (editEntity !== null) {\r\n          return (\r\n            <TruckForm\r\n              option={option}\r\n              modalClose={modalClose}\r\n              setOperationResponse={setOperationResponse}\r\n              editEntity={editEntity}\r\n            />\r\n          );\r\n        } else {\r\n          if (operation === \"create\") {\r\n            return (\r\n              <TruckForm\r\n                option={option}\r\n                modalClose={modalClose}\r\n                setOperationResponse={setOperationResponse}\r\n                show={show}\r\n              />\r\n            );\r\n          } else if (operation === \"delete\") {\r\n            return deleteForm(\"Camiónes recolectores\");\r\n          } else {\r\n            return (\r\n              <TruckForm\r\n                option={option}\r\n                modalClose={modalClose}\r\n                setOperationResponse={setOperationResponse}\r\n                editEntity={editEntity}\r\n              />\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function deleteForm(entityName) {\r\n    return (\r\n      <>\r\n        <div className=\"deleteFormTitle\">\r\n          {entityArrayDelete.length > 0 ? (\r\n            <p>¿Estás seguro de eliminar los {entityName} seleccionados?</p>\r\n          ) : (\r\n            <p>No ha seleecionado {entityName}</p>\r\n          )}\r\n        </div>\r\n        {error && <div className=\"error mt-3\">{error}</div>}\r\n        <div className=\"modalFooter\">\r\n          {entityArrayDelete.length > 0 ? (\r\n            <>\r\n              <button onClick={deleteEntities}> Confirmar </button>\r\n              <button onClick={modalClose}> Cancelar</button>\r\n            </>\r\n          ) : (\r\n            <button onClick={modalClose}> Cerrar </button>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  async function deleteEntities() {\r\n    try {\r\n      let response;\r\n      entityArrayDelete.map(async (id, index) => {\r\n        response = await axios.delete(`${option}/${id}`);\r\n        console.log(response);\r\n        if (index === entityArrayDelete.length - 1) {\r\n          setError(null);\r\n          setOperationResponse(response);\r\n          setEntityArrayDelete([]);\r\n          modalClose();\r\n        }\r\n      });\r\n    } catch (err) {\r\n      setError(err.response.data.error);\r\n      console.log(err.response.data);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Backdrop show={show || editEntity} clicked={modalClose} />\r\n      <div\r\n        className=\"modal\"\r\n        style={{\r\n          transform:\r\n            show || editEntity ? \"translateY(-70px)\" : \"translateY(-100vh)\",\r\n          opacity: show || editEntity ? \"1\" : \"0\",\r\n        }}\r\n      >\r\n        <div className=\"modalHeader\">\r\n          <h3>{mTitle}</h3>\r\n        </div>\r\n        <div className=\"modal-content\">{renderForm()}</div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\pages\\Dashboard\\Users\\User\\User.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Backdrop\\Backdrop.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\utils\\constants.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\CollectionPointForm\\CollectionPointForm.js",["160","161"],"import { useState } from \"react\";\r\nimport { Formik, Form } from \"formik\";\r\nimport axios from \"../../../../axios\";\r\nimport * as Yup from \"yup\";\r\nimport CustomTextInput from \"../../../common/Input/Input\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst CollectionForm = ({\r\n  option,\r\n  modalClose,\r\n  setOperationResponse,\r\n  editEntity,\r\n  show,\r\n}) => {\r\n  const [error, setError] = useState(null);\r\n  const [radio, setRadio] = useState(\"1\");\r\n  const [entity, setEntity] = useState(null);\r\n  const [fetched, setFeched] = useState(false);\r\n\r\n  useEffect(() => {\r\n    editEntity && !fetched && getEntityById();\r\n    return () => {\r\n      setFeched(false);\r\n      entity && setEntity(null);\r\n    };\r\n  }, [editEntity, entity, show]);\r\n\r\n  async function getEntityById() {\r\n    const reponse = await axios.get(`${option}/${editEntity}`);\r\n    setFeched(true);\r\n    setEntity(reponse.data);\r\n    setRadio(reponse.data.tipo_punto.toString());\r\n  }\r\n\r\n  async function submitHandler(values, setSubmitting, resetForm) {\r\n    let entity = { ...values };\r\n    entity = { ...entity, typePoint: 3 };\r\n    let response;\r\n    try {\r\n      if (editEntity) {\r\n        response = await axios.put(`${option}/${editEntity}`, entity);\r\n      } else {\r\n        response = await axios.post(option, entity);\r\n      }\r\n\r\n      console.log(response);\r\n      resetForm();\r\n      setSubmitting(false);\r\n      setError(null);\r\n      setOperationResponse(response);\r\n      modalClose(\"Punto de acopio creado correctamente\");\r\n    } catch (err) {\r\n      setSubmitting(false);\r\n      setError(err.response.data.error);\r\n      console.log(err.response.data);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      enableReinitialize\r\n      initialValues={{\r\n        name: entity ? entity.nombre : \"\",\r\n        longitude: entity ? entity.longitud : \"\",\r\n        latitude: entity ? entity.latitud : \"\",\r\n        capacidad: entity ? entity.capacidad : \"\",\r\n        capacidad_actual: entity ? entity.capacidad_actual : \"\",\r\n        area: entity ? (entity.area ? entity.area : \"\") : \"\",\r\n        altura: entity ? (entity.altura ? entity.altura : \"\") : \"\",\r\n      }}\r\n      validationSchema={Yup.object({\r\n        name: Yup.string()\r\n          .required(\"Este campo es obligatorio\")\r\n          .max(\r\n            40,\r\n            \"El nombre de punto de acopio debe contener como máximo 40 caracteres\"\r\n          ),\r\n        longitude: Yup.string().required(\"Este campo es obligatorio\"),\r\n        latitude: Yup.string().required(\"Este campo es obligatorio\"),\r\n        area: Yup.string().required(\"Este campo es obligatorio\"),\r\n        altura: Yup.string().required(\"Este campo es obligatorio\"),\r\n      })}\r\n      onSubmit={(values, { setSubmitting, resetForm }) => {\r\n        submitHandler(values, setSubmitting, resetForm);\r\n      }}\r\n    >\r\n      {(props) => (\r\n        <Form className=\"modalForm\">\r\n          <CustomTextInput name=\"name\" type=\"text\" placeholder=\"Nombres\" />\r\n          <div className=\"flex-input\">\r\n            <CustomTextInput\r\n              name=\"longitude\"\r\n              type=\"number\"\r\n              placeholder=\"Longitud\"\r\n            />\r\n            <CustomTextInput\r\n              name=\"latitude\"\r\n              type=\"number\"\r\n              placeholder=\"Latitud\"\r\n            />\r\n          </div>\r\n          <div className=\"flex-input\">\r\n            <CustomTextInput\r\n              disabled={true}\r\n              name=\"capacidad\"\r\n              type=\"number\"\r\n              placeholder=\"Capacidad\"\r\n            />\r\n            <span>\r\n              m<sup>3</sup>\r\n            </span>\r\n            <CustomTextInput\r\n              disabled={true}\r\n              name=\"capacidad_actual\"\r\n              type=\"number\"\r\n              placeholder=\"0\"\r\n            />\r\n            <span>\r\n              m<sup>3</sup>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex-input\">\r\n            <CustomTextInput name=\"altura\" type=\"number\" placeholder=\"Altura\" />\r\n            <span>m</span>\r\n            <CustomTextInput name=\"area\" type=\"number\" placeholder=\"Área\" />\r\n            <span>\r\n              m<sup>2</sup>\r\n            </span>\r\n          </div>\r\n          {/* <div className=\"button-stack\">\r\n            <div>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"radio\"\r\n                value=\"1\"\r\n                checked={radio === \"1\"}\r\n                onChange={(e) => setRadio(e.target.value)}\r\n              />{\" \"}\r\n              Inicio\r\n            </div>\r\n            <div>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"radio\"\r\n                value=\"2\"\r\n                checked={radio === \"2\"}\r\n                onChange={(e) => setRadio(e.target.value)}\r\n              />{\" \"}\r\n              Llegada\r\n            </div>\r\n            <div>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"radio\"\r\n                value=\"3\"\r\n                checked={radio === \"3\"}\r\n                onChange={(e) => setRadio(e.target.value)}\r\n              />{\" \"}\r\n              Acopio\r\n            </div>\r\n          </div> */}\r\n          {error && <div className=\"error mt-3\">{error}</div>}\r\n          <div className=\"modalFooter\">\r\n            <button type=\"submit\">\r\n              {\" \"}\r\n              {props.isSubmitting ? \"Creando...\" : \"Confimar\"}{\" \"}\r\n            </button>\r\n            <button type=\"button\" onClick={modalClose}>\r\n              {\" \"}\r\n              Cancelar\r\n            </button>\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default CollectionForm;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\EntryPointForm\\EntryPointForm.js",[],"D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\UserForm\\UserForm.js",["162","163","164","165","166","167"],"import { useState, useEffect } from \"react\";\r\nimport { Formik, Form } from \"formik\";\r\nimport axios from \"../../../../axios\";\r\nimport * as Yup from \"yup\";\r\nimport CustomTextInput from \"../../../common/Input/Input\";\r\nimport CustomSelect from \"../../../common/Select/Select\";\r\nimport \"./UserForm.css\";\r\nimport Trucks from \"./../../../../pages/Dashboard/Trucks/Trucks\";\r\nimport { date } from \"yup/lib/locale\";\r\nimport MessageModal from \"../../MessageModal\";\r\n\r\nconst UserForm = ({\r\n  option,\r\n  modalClose,\r\n  setOperationResponse,\r\n  editEntity,\r\n  show,\r\n}) => {\r\n  const [error, setError] = useState(null);\r\n  const [entity, setEntity] = useState(null);\r\n  const [fetched, setFeched] = useState(false);\r\n  const [roles, setRoles] = useState(\"\");\r\n  const [trucks, setTrucks] = useState(null);\r\n  const [licenseNumber, setLicenseNumber] = useState(null);\r\n  const [showDropdownAndLicense, setShowDropdownAndLicense] = useState(false);\r\n  const [rolValue, setRolValue] = useState(\"\");\r\n  const [camionValue, setCamionValue] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetchRoles();\r\n    fetchTrucks(editEntity);\r\n    return () => {\r\n      setFeched(false);\r\n      entity && setEntity(null);\r\n    };\r\n  }, [editEntity, entity, show]);\r\n\r\n  async function fetchRoles() {\r\n    try {\r\n      const response = await axios.get(\"roles/all\");\r\n      setRoles(response.data);\r\n    } catch (err) {\r\n      console.log(err);\r\n      setError(err.response.data.error);\r\n    }\r\n  }\r\n\r\n  async function fetchTrucks(editEntity) {\r\n    try {\r\n      const response = await axios.get(\"trucks/all\", {\r\n        params: {\r\n          available: true,\r\n        },\r\n      });\r\n      setTrucks(response.data);\r\n      editEntity && !fetched && getEntityById();\r\n    } catch (err) {\r\n      console.log(err);\r\n      setError(err.response.data.error);\r\n    }\r\n  }\r\n\r\n  async function getEntityById() {\r\n    setLicenseNumber(null);\r\n    setRolValue(\"\");\r\n    setCamionValue(\"\");\r\n    try {\r\n      const response = await axios.get(`${option}/${editEntity}`);\r\n      setFeched(true);\r\n      if (response.data.rol_id === 1) {\r\n        setShowDropdownAndLicense(false);\r\n        setRolValue(\"Fiscalizador\");\r\n        setCamionValue(\"\");\r\n      } else {\r\n        setShowDropdownAndLicense(true);\r\n        setRolValue(\"Conductor\");\r\n        setCamionValue(response.data.camion_id);\r\n      }\r\n      setEntity(response.data);\r\n      setLicenseNumber(response.data.licencia_de_conducir);\r\n      setTimeout(() => {\r\n        setTrucks((trucks) => [...trucks, { placa: response.data.camion_id }]);\r\n      }, 500);\r\n    } catch (err) {\r\n      console.log(err);\r\n      setError(err.response.data.error);\r\n    }\r\n  }\r\n\r\n  async function submitHandler(values, setSubmitting, resetForm) {\r\n    debugger;\r\n    const rol_id =\r\n      rolValue == \"Fiscalizador\"\r\n        ? (values.rol_id = 1)\r\n        : rolValue == \"Conductor\"\r\n        ? (values.rol_id = 2)\r\n        : (values.rol_id = null);\r\n    let entity;\r\n    if (rol_id === 2) {\r\n      if (camionValue !== \"\") {\r\n        const camion_id = trucks.find((truck) => truck.placa === camionValue)\r\n          .id;\r\n        entity = {\r\n          ...values,\r\n          rol_id,\r\n          camion_id,\r\n          licencia_de_conducir: licenseNumber && licenseNumber.toString(),\r\n        };\r\n      } else {\r\n        setSubmitting(false);\r\n        setError({ camion_id: \"Debe seleccionar un camión\" });\r\n        return;\r\n      }\r\n    } else if (rol_id === 1) {\r\n      entity = {\r\n        ...values,\r\n        rol_id,\r\n        camion_id: null,\r\n        licencia_de_conducir: null,\r\n      };\r\n    } else {\r\n      setSubmitting(false);\r\n      setError({ rol_id: \"Debe seleccionar un rol\" });\r\n      return;\r\n    }\r\n\r\n    let response;\r\n    try {\r\n      if (editEntity) {\r\n        response = await axios.put(`${option}/${editEntity}`, entity);\r\n      } else {\r\n        response = await axios.post(`${option}/register`, entity);\r\n      }\r\n\r\n      console.log(response);\r\n      resetForm();\r\n      setRolValue(\"\");\r\n      setLicenseNumber(null);\r\n      setSubmitting(false);\r\n      setError(null);\r\n      setOperationResponse(response);\r\n      modalClose(\"Usuario creado correctamente\");\r\n    } catch (err) {\r\n      setSubmitting(false);\r\n      setError(err.response.data);\r\n      console.log(err.response.data);\r\n    }\r\n  }\r\n\r\n  console.log(trucks);\r\n\r\n  function onlyNumber(e) {\r\n    setLicenseNumber(e.target.value.replace(/[^0-9]/g, \"\"));\r\n  }\r\n\r\n  function handleDropdownChange(e, typeDropDown) {\r\n    if (typeDropDown === \"rol_id\") {\r\n      if (e.target.value === \"Fiscalizador\") {\r\n        setShowDropdownAndLicense(false);\r\n      } else {\r\n        setShowDropdownAndLicense(true);\r\n      }\r\n      setRolValue(e.target.value);\r\n    } else {\r\n      if (e.target.value !== \"\")\r\n        error && error.camion_id && delete error.camion_id;\r\n      setCamionValue(e.target.value);\r\n    }\r\n  }\r\n\r\n  console.log(entity);\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        enableReinitialize\r\n        initialValues={{\r\n          nombre_usuario: entity\r\n            ? entity.nombre_usuario\r\n              ? entity.nombre_usuario\r\n              : \"\"\r\n            : \"\",\r\n          nombre: entity ? (entity.nombre ? entity.nombre : \"\") : \"\",\r\n          apellido: entity ? (entity.apellido ? entity.apellido : \"\") : \"\",\r\n          dni: entity ? (entity.dni ? entity.dni : \"\") : \"\",\r\n          fecha_nacimiento: entity\r\n            ? entity.fecha_nacimiento\r\n              ? entity.fecha_nacimiento.substr(0, 10)\r\n              : \"\"\r\n            : \"\",\r\n          contrasena: \"\",\r\n          rol_id: entity\r\n            ? entity.rol_id === 1\r\n              ? \"Fiscalizador\"\r\n              : \"Conductor\"\r\n            : \"\",\r\n          camion_id: entity ? entity.camion_id : \"\",\r\n        }}\r\n        validationSchema={Yup.object({\r\n          nombre_usuario: Yup.string().required(\"Este campo es obligatorio\"),\r\n          nombre: Yup.string()\r\n            .max(\r\n              40,\r\n              \"El nombre no puede contener más de 40 caracteres de texto\"\r\n            )\r\n            .matches(/^[A-Za-z ]+$/, \"El nombre solo puede contener caracteres\")\r\n            .required(\"Este campo es obligatorio\"),\r\n          apellido: Yup.string()\r\n            .max(\r\n              40,\r\n              \"El nombre no puede contener más de 40 caracteres de texto\"\r\n            )\r\n            .matches(\r\n              /^[A-Za-z ]+$/,\r\n              \"Los apellidos solo pueden contener caracteres\"\r\n            )\r\n            .required(\"Este campo es obligatorio\"),\r\n          dni: Yup.string()\r\n            .min(8, \"El dni debe contener 8 números\")\r\n            .max(8, \"El dni debe contener 8 números\")\r\n            .required(\"Este campo es obligatorio\"),\r\n          fecha_nacimiento: Yup.date()\r\n            .max(\r\n              new Date(\"01-01-2002\"),\r\n              \"La fecha de nacimiento debe ser menor a 2002\"\r\n            )\r\n            .required(\"Este campo es obligatorio\"),\r\n        })}\r\n        onSubmit={(values, { setSubmitting, resetForm }) => {\r\n          submitHandler(values, setSubmitting, resetForm);\r\n        }}\r\n      >\r\n        {(props) => (\r\n          <Form className=\"modalForm\">\r\n            <div style={{ marginLeft: \"-25px\" }}>\r\n              <CustomTextInput\r\n                name=\"nombre_usuario\"\r\n                type=\"text\"\r\n                placeholder=\"Nombre de usuario\"\r\n              />\r\n              <CustomTextInput\r\n                name=\"nombre\"\r\n                type=\"text\"\r\n                placeholder=\"Nombres\"\r\n              />\r\n              <CustomTextInput\r\n                name=\"apellido\"\r\n                type=\"text\"\r\n                placeholder=\"Apellidos\"\r\n              />\r\n            </div>\r\n            <div className=\"flex-input\">\r\n              <CustomTextInput name=\"dni\" type=\"number\" placeholder=\"DNI\" />\r\n              <CustomTextInput name=\"fecha_nacimiento\" type=\"date\" />{\" \"}\r\n              <span>Fecha de nacimiento</span>\r\n            </div>\r\n            <div style={{ marginLeft: \"-25px\" }}>\r\n              {showDropdownAndLicense && (\r\n                <>\r\n                  <div style={{ marginLeft: \"30px\" }}>\r\n                    <CustomSelect\r\n                      onChange={(e) => handleDropdownChange(e, \"camion_id\")}\r\n                      label=\"camion_id\"\r\n                      name=\"camion_id\"\r\n                      value={camionValue}\r\n                    >\r\n                      <option value=\"\">Seleccionar camión</option>\r\n                      {trucks &&\r\n                        trucks.map((truck) => {\r\n                          return (\r\n                            <option key={truck.placa} value={truck.placa}>\r\n                              {truck.placa}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                    </CustomSelect>\r\n                    {error && error.camion_id && (\r\n                      <div className=\"error mt-3\">{error.camion_id}</div>\r\n                    )}\r\n                  </div>\r\n                  <input\r\n                    name=\"licencia_de_conducir\"\r\n                    placeholder=\"Licencia de conducir\"\r\n                    type=\"tel\"\r\n                    onChange={onlyNumber}\r\n                    value={licenseNumber}\r\n                    maxLength=\"9\"\r\n                  />\r\n                  {error && error.licencia_de_conducir && (\r\n                    <div className=\"error mt-3\">\r\n                      {error.licencia_de_conducir}\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n              <div style={{ marginLeft: \"30px\" }}>\r\n                <CustomSelect\r\n                  onChange={(e) => handleDropdownChange(e, \"rol_id\")}\r\n                  label=\"rol_id\"\r\n                  name=\"rol_id\"\r\n                  value={rolValue}\r\n                >\r\n                  <option value=\"\">Seleccionar rol</option>\r\n                  {roles &&\r\n                    roles.map((rol) => {\r\n                      return (\r\n                        <option key={rol.nombre} value={rol.nombre}>\r\n                          {rol.nombre}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                </CustomSelect>\r\n                {error && error.rol_id && (\r\n                  <div className=\"error mt-3\">{error.rol_id}</div>\r\n                )}\r\n              </div>\r\n              <CustomTextInput\r\n                name=\"contrasena\"\r\n                type=\"password\"\r\n                placeholder=\"Contraseña\"\r\n              />\r\n              {error && error.contrasena && (\r\n                <div className=\"error mt-3\">{error.contrasena}</div>\r\n              )}\r\n            </div>\r\n            <div className=\"modalFooter\">\r\n              <button type=\"submit\">\r\n                {props.isSubmitting ? \"Creando...\" : \"Confirmar\"}{\" \"}\r\n              </button>\r\n              <button type=\"button\" onClick={modalClose}>\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserForm;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\Modal\\forms\\TruckForm\\TruckForm.js",["168"],"import { useState, useEffect } from \"react\";\r\nimport { Formik, Form } from \"formik\";\r\nimport axios from \"../../../../axios\";\r\nimport * as Yup from \"yup\";\r\nimport CustomTextInput from \"../../../common/Input/Input\";\r\nimport \"./TruckForm.css\";\r\n\r\nconst TruckForm = ({\r\n  option,\r\n  modalClose,\r\n  setOperationResponse,\r\n  editEntity,\r\n  show,\r\n}) => {\r\n  const [error, setError] = useState(null);\r\n  const [radio, setRadio] = useState(\"1\");\r\n  const [entity, setEntity] = useState(null);\r\n  const [fetched, setFeched] = useState(false);\r\n\r\n  useEffect(() => {\r\n    editEntity && !fetched && getEntityById();\r\n    return () => {\r\n      setFeched(false);\r\n      entity && setEntity(null);\r\n    };\r\n  }, [editEntity, entity, show]);\r\n\r\n  async function getEntityById() {\r\n    const reponse = await axios.get(`${option}/${editEntity}`);\r\n    setFeched(true);\r\n    setEntity(reponse.data);\r\n    setRadio(reponse.data.tipo_combustible.toString());\r\n  }\r\n\r\n  async function submitHandler(values, setSubmitting, resetForm) {\r\n    let entity = { ...values };\r\n    entity = { ...entity, tipo_combustible: radio };\r\n    let response;\r\n    try {\r\n      if (editEntity) {\r\n        response = await axios.put(`${option}/${editEntity}`, entity);\r\n      } else {\r\n        response = await axios.post(option, entity);\r\n      }\r\n\r\n      console.log(response);\r\n      resetForm();\r\n      setSubmitting(false);\r\n      setError(null);\r\n      setOperationResponse(response);\r\n      modalClose(\"Camión creado correctamente\");\r\n    } catch (err) {\r\n      setSubmitting(false);\r\n      setError(err.response.data);\r\n      console.log(err.response.data);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      enableReinitialize\r\n      initialValues={{\r\n        placa: entity ? entity.placa : \"\",\r\n        capacidad: entity ? entity.capacidad : \"\",\r\n        capacidad_actual: entity ? entity.capacidad_actual : \"\",\r\n        consumo: entity ? entity.consumo : \"\",\r\n        marca: entity ? entity.marca : \"\",\r\n        modelo: entity ? entity.modelo : \"\",\r\n      }}\r\n      validationSchema={Yup.object({\r\n        placa: Yup.string()\r\n          .required(\"Este campo es obligatorio\")\r\n          .length(6, \"Solo se admiten 6 caracteres entre números y letras\")\r\n          .matches(\r\n            /^[A-Za-z0-9]+$/,\r\n            \"Solo se admiten 6 caracteres entre números y letras\"\r\n          )\r\n          .required(\"Este campo es obligatorio\"),\r\n        capacidad: Yup.string().required(\"Este campo es obligatorio\"),\r\n        consumo: Yup.string().required(\"Este campo es obligatorio\"),\r\n        marca: Yup.string()\r\n          .required(\"Este campo es obligatorio\")\r\n          .max(\r\n            20,\r\n            \"La marca puede contener a lo mucho 20 caracteres entre números y letras\"\r\n          )\r\n          .matches(\r\n            /^[A-Za-z0-9 ]+$/,\r\n            \"La marca puede contener a lo mucho 20 caracteres entre números y letras\"\r\n          ),\r\n        modelo: Yup.string()\r\n          .required(\"Este campo es obligatorio\")\r\n          .max(\r\n            20,\r\n            \"El modelo puede contener a lo mucho 20 caracteres entre números y letras\"\r\n          )\r\n          .matches(\r\n            /^[A-Za-z0-9 ]+$/,\r\n            \"El modelo puede contener a lo mucho 20 caracteres entre números y letras\"\r\n          ),\r\n      })}\r\n      onSubmit={(values, { setSubmitting, resetForm }) => {\r\n        submitHandler(values, setSubmitting, resetForm);\r\n      }}\r\n    >\r\n      {(props) => (\r\n        <Form className=\"modalForm\">\r\n          <div style={{ marginLeft: \"-25px\" }}>\r\n            <CustomTextInput name=\"placa\" type=\"text\" placeholder=\"Placa\" />\r\n            {error && error.placa && (\r\n              <div className=\"error mt-3\">{error.placa}</div>\r\n            )}\r\n          </div>\r\n          <div className=\"flex-input\">\r\n            <CustomTextInput\r\n              name=\"capacidad\"\r\n              type=\"number\"\r\n              placeholder=\"Capacidad\"\r\n            />\r\n            <span>\r\n              m<sup>3</sup>\r\n            </span>\r\n            <CustomTextInput\r\n              name=\"consumo\"\r\n              type=\"number\"\r\n              placeholder=\"Consumo\"\r\n            />{\" \"}\r\n            <span>Galones</span>\r\n          </div>\r\n          <div className=\"flex-input\">\r\n            <CustomTextInput\r\n              disable=\"true\"\r\n              name=\"capacidad_actual\"\r\n              type=\"number\"\r\n              placeholder=\"0\"\r\n            />\r\n            <span>\r\n              m<sup>3</sup>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex-input\">\r\n            <div className=\"button-stack\">\r\n              <div>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"radio\"\r\n                  value=\"1\"\r\n                  checked={radio === \"1\"}\r\n                  onChange={(e) => setRadio(e.target.value)}\r\n                />{\" \"}\r\n                Gasolina 98\r\n              </div>\r\n              <div>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"radio\"\r\n                  value=\"2\"\r\n                  checked={radio === \"2\"}\r\n                  onChange={(e) => setRadio(e.target.value)}\r\n                />{\" \"}\r\n                Petróleo\r\n              </div>\r\n              <div>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"radio\"\r\n                  value=\"3\"\r\n                  checked={radio === \"3\"}\r\n                  onChange={(e) => setRadio(e.target.value)}\r\n                />{\" \"}\r\n                Diesel 82\r\n              </div>\r\n            </div>\r\n            <div className=\"flex-input col\">\r\n              <CustomTextInput name=\"marca\" type=\"text\" placeholder=\"Marca\" />\r\n              <CustomTextInput name=\"modelo\" type=\"text\" placeholder=\"Modelo\" />\r\n            </div>\r\n          </div>\r\n          {/* { error && (\r\n            <div className=\"error mt-3\">{error}</div>\r\n          )} */}\r\n          <div className=\"modalFooter\">\r\n            <button type=\"submit\">\r\n              {\" \"}\r\n              {props.isSubmitting ? \"Creando...\" : \"Confimar\"}{\" \"}\r\n            </button>\r\n            <button type=\"button\" onClick={modalClose}>\r\n              {\" \"}\r\n              Cancelar\r\n            </button>\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default TruckForm;\r\n","D:\\ReactJs\\ReactProyectos\\SGC-frontend\\src\\components\\common\\Select\\Select.js",[],{"ruleId":"169","replacedBy":"170"},{"ruleId":"171","replacedBy":"172"},{"ruleId":"173","severity":1,"message":"174","line":5,"column":3,"nodeType":"175","messageId":"176","endLine":5,"endColumn":7},{"ruleId":"173","severity":1,"message":"177","line":15,"column":7,"nodeType":"175","messageId":"176","endLine":15,"endColumn":14},{"ruleId":"173","severity":1,"message":"178","line":29,"column":9,"nodeType":"175","messageId":"176","endLine":29,"endColumn":16},{"ruleId":"173","severity":1,"message":"179","line":4,"column":8,"nodeType":"175","messageId":"176","endLine":4,"endColumn":18},{"ruleId":"173","severity":1,"message":"180","line":10,"column":7,"nodeType":"175","messageId":"176","endLine":10,"endColumn":19},{"ruleId":"181","severity":1,"message":"182","line":28,"column":6,"nodeType":"183","endLine":28,"endColumn":22,"suggestions":"184"},{"ruleId":"181","severity":1,"message":"185","line":50,"column":6,"nodeType":"183","endLine":50,"endColumn":25,"suggestions":"186"},{"ruleId":"181","severity":1,"message":"187","line":68,"column":6,"nodeType":"183","endLine":68,"endColumn":30,"suggestions":"188"},{"ruleId":"181","severity":1,"message":"187","line":86,"column":6,"nodeType":"183","endLine":86,"endColumn":30,"suggestions":"189"},{"ruleId":"181","severity":1,"message":"185","line":102,"column":6,"nodeType":"183","endLine":102,"endColumn":25,"suggestions":"190"},{"ruleId":"173","severity":1,"message":"191","line":6,"column":8,"nodeType":"175","messageId":"176","endLine":6,"endColumn":17},{"ruleId":"173","severity":1,"message":"192","line":10,"column":8,"nodeType":"175","messageId":"176","endLine":10,"endColumn":14},{"ruleId":"193","severity":1,"message":"194","line":40,"column":19,"nodeType":"195","endLine":40,"endColumn":48},{"ruleId":"193","severity":1,"message":"194","line":46,"column":19,"nodeType":"195","endLine":46,"endColumn":59},{"ruleId":"193","severity":1,"message":"194","line":52,"column":19,"nodeType":"195","endLine":52,"endColumn":49},{"ruleId":"193","severity":1,"message":"194","line":64,"column":15,"nodeType":"195","endLine":64,"endColumn":43},{"ruleId":"193","severity":1,"message":"194","line":68,"column":13,"nodeType":"195","endLine":68,"endColumn":44},{"ruleId":"173","severity":1,"message":"196","line":1,"column":10,"nodeType":"175","messageId":"176","endLine":1,"endColumn":19},{"ruleId":"173","severity":1,"message":"197","line":1,"column":21,"nodeType":"175","messageId":"176","endLine":1,"endColumn":29},{"ruleId":"181","severity":1,"message":"198","line":32,"column":6,"nodeType":"183","endLine":32,"endColumn":16,"suggestions":"199"},{"ruleId":"193","severity":1,"message":"194","line":120,"column":11,"nodeType":"195","endLine":120,"endColumn":29},{"ruleId":"173","severity":1,"message":"200","line":4,"column":8,"nodeType":"175","messageId":"176","endLine":4,"endColumn":13},{"ruleId":"181","severity":1,"message":"201","line":28,"column":6,"nodeType":"183","endLine":28,"endColumn":47,"suggestions":"202"},{"ruleId":"173","severity":1,"message":"203","line":16,"column":10,"nodeType":"175","messageId":"176","endLine":16,"endColumn":15},{"ruleId":"181","severity":1,"message":"204","line":26,"column":6,"nodeType":"183","endLine":26,"endColumn":32,"suggestions":"205"},{"ruleId":"173","severity":1,"message":"206","line":8,"column":8,"nodeType":"175","messageId":"176","endLine":8,"endColumn":14},{"ruleId":"173","severity":1,"message":"207","line":9,"column":10,"nodeType":"175","messageId":"176","endLine":9,"endColumn":14},{"ruleId":"173","severity":1,"message":"208","line":10,"column":8,"nodeType":"175","messageId":"176","endLine":10,"endColumn":20},{"ruleId":"181","severity":1,"message":"209","line":36,"column":6,"nodeType":"183","endLine":36,"endColumn":32,"suggestions":"210"},{"ruleId":"211","severity":1,"message":"212","line":93,"column":16,"nodeType":"213","messageId":"214","endLine":93,"endColumn":18},{"ruleId":"211","severity":1,"message":"212","line":95,"column":20,"nodeType":"213","messageId":"214","endLine":95,"endColumn":22},{"ruleId":"181","severity":1,"message":"204","line":26,"column":6,"nodeType":"183","endLine":26,"endColumn":32,"suggestions":"215"},"no-native-reassign",["216"],"no-negated-in-lhs",["217"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","'options' is assigned a value but never used.","'history' is assigned a value but never used.","'jwt_decode' is defined but never used.","'puntoInicial' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'initMarkers'. Either include it or remove the dependency array.","ArrayExpression",["218"],"React Hook useEffect has missing dependencies: 'decoded.id', 'decoded.rol_id', and 'map'. Either include them or remove the dependency array.",["219"],"React Hook useEffect has missing dependencies: 'decoded.id' and 'decoded.rol_id'. Either include them or remove the dependency array.",["220"],["221"],["222"],"'dashboard' is defined but never used.","'setJWT' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'useEffect' is defined but never used.","'useState' is defined but never used.","React Hook useEffect has a missing dependency: 'setNavBarTitle'. Either include it or remove the dependency array.",["223"],"'axios' is defined but never used.","React Hook useEffect has a missing dependency: 'modalTitle'. Either include it or remove the dependency array.",["224"],"'radio' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'fetched' and 'getEntityById'. Either include them or remove the dependency array.",["225"],"'Trucks' is defined but never used.","'date' is defined but never used.","'MessageModal' is defined but never used.","React Hook useEffect has a missing dependency: 'fetchTrucks'. Either include it or remove the dependency array.",["226"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected",["227"],"no-global-assign","no-unsafe-negation",{"desc":"228","fix":"229"},{"desc":"230","fix":"231"},{"desc":"230","fix":"232"},{"desc":"230","fix":"233"},{"desc":"230","fix":"234"},{"desc":"235","fix":"236"},{"desc":"237","fix":"238"},{"desc":"239","fix":"240"},{"desc":"241","fix":"242"},{"desc":"239","fix":"243"},"Update the dependencies array to be: [initMarkers, map, showRoute]",{"range":"244","text":"245"},"Update the dependencies array to be: [socket, showRoute, map, decoded.rol_id, decoded.id]",{"range":"246","text":"247"},{"range":"248","text":"247"},{"range":"249","text":"247"},{"range":"250","text":"247"},"Update the dependencies array to be: [location, setNavBarTitle]",{"range":"251","text":"252"},"Update the dependencies array to be: [location, option, operation, editEntity, modalTitle]",{"range":"253","text":"254"},"Update the dependencies array to be: [editEntity, entity, fetched, getEntityById, show]",{"range":"255","text":"256"},"Update the dependencies array to be: [editEntity, entity, fetchTrucks, show]",{"range":"257","text":"258"},{"range":"259","text":"256"},[803,819],"[initMarkers, map, showRoute]",[1480,1499],"[socket, showRoute, map, decoded.rol_id, decoded.id]",[2037,2061],[2566,2590],[3028,3047],[1041,1051],"[location, setNavBarTitle]",[803,844],"[location, option, operation, editEntity, modalTitle]",[701,727],"[editEntity, entity, fetched, getEntityById, show]",[1202,1228],"[editEntity, entity, fetchTrucks, show]",[698,724]]